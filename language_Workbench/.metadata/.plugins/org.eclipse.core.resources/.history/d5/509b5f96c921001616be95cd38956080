package org.irisa.diverse.videogen.videoGen.aspects.visitors;

import fr.inria.diverse.k3.al.annotationprocessor.Aspect;
import org.chocosolver.solver.Solver;
import org.chocosolver.solver.variables.IntVar;
import org.chocosolver.solver.variables.VariableFactory;
import org.irisa.diverse.videogen.videoGen.Mandatory;
import org.irisa.diverse.videogen.videoGen.Video;
import org.irisa.diverse.videogen.videoGen.VideoGen;
import org.irisa.diverse.videogen.videoGen.aspects.visitors.MandatoryDurationConstraintsAspectMandatoryAspectProperties;
import org.irisa.diverse.videogen.videoGen.aspects.visitors.VideoGenDurationConstraintsAspect;

@Aspect(className = Mandatory.class)
@SuppressWarnings("all")
public class MandatoryDurationConstraintsAspect {
  public static void visit(final Mandatory _self, final VideoGen vid) {
    final org.irisa.diverse.videogen.videoGen.aspects.visitors.MandatoryDurationConstraintsAspectMandatoryAspectProperties _self_ = org.irisa.diverse.videogen.videoGen.aspects.visitors.MandatoryDurationConstraintsAspectMandatoryAspectContext.getSelf(_self);
    _privk3_visit(_self_, _self,vid);;
  }
  
  protected static void _privk3_visit(final MandatoryDurationConstraintsAspectMandatoryAspectProperties _self_, final Mandatory _self, final VideoGen vid) {
    String _name = _self.getName();
    Solver _solver = VideoGenDurationConstraintsAspect.solver(vid);
    IntVar _fixed = VariableFactory.fixed(_name, 1, _solver);
    Video _video = _self.getVideo();
    Integer _duration = _video.getDuration();
    VideoGenDurationConstraintsAspect.addVar(vid, _fixed, (_duration).intValue());
  }
}
