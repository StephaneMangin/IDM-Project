package org.irisa.diverse.videogen.videoGen.aspects.utils;

import java.net.URI;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.util.logging.FileHandler;
import java.util.logging.Logger;
import java.util.logging.SimpleFormatter;
import org.eclipse.core.resources.IProject;
import org.eclipse.core.resources.IWorkspace;
import org.eclipse.core.resources.IWorkspaceRoot;
import org.eclipse.core.resources.ResourcesPlugin;
import org.eclipse.xtext.xbase.lib.Exceptions;
import org.irisa.diverse.videogen.transformations.helpers.SystemHelper;

@SuppressWarnings("all")
public class LoggableVisitor {
  protected Logger log = Logger.getLogger(this.getClass().getSimpleName());
  
  public LoggableVisitor() {
    try {
      IWorkspace _workspace = ResourcesPlugin.getWorkspace();
      IWorkspaceRoot _root = _workspace.getRoot();
      IProject[] _projects = _root.getProjects();
      IProject _get = _projects[0];
      URI _locationURI = _get.getLocationURI();
      final Path workspacePath = Paths.get(_locationURI);
      String _plus = (workspacePath + "/logs");
      final Path logPath = Paths.get(_plus);
      SystemHelper.mkDirs(logPath);
      String _plus_1 = (logPath + "/");
      String _name = this.log.getName();
      String _plus_2 = (_plus_1 + _name);
      String _plus_3 = (_plus_2 + ".log");
      final FileHandler fh = new FileHandler(_plus_3);
      final SimpleFormatter formatter = new SimpleFormatter();
      fh.setFormatter(formatter);
      this.log.addHandler(fh);
    } catch (Throwable _e) {
      throw Exceptions.sneakyThrow(_e);
    }
  }
}
